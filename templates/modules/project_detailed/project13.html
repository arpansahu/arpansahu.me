{% extends 'base.html' %}
{% load static %}
<!-- Specific CSS goes HERE -->
{% block stylesheets %}


    <style>
    *, *:before, *:after {
      box-sizing: border-box;
    }

    pre[class*="language-"] {
      position:relative;
      overflow: auto;
      margin:5px 0;
      padding:1.75rem 0 1.75rem 1rem;
      border-radius:10px;
    }

    copy-button{
      position:absolute;
      top:5px;
      right:5px;
      font-size:.9rem;
      padding:.15rem;
      background-color:#828282;
      color: #1e1e1e;
      border:ridge 1px #7b7b7c;
      border-radius:5px;
      text-shadow:#c4c4c4 0 0 2px;
    }

    copy-button:hover{
      cursor:pointer;
       background-color:#bcbabb;
    }

    </style>
{% endblock stylesheets %}

{% block content %}

    <!-- start hero -->
    <section class="hero-one position-relative bg-black" id="about"  style="background-image: url('{% static "images/personal/main-bg.png" %}'); background-size: cover; background-position: center center;">
        <div class="container">
            <div class="row align-items-center justify-content-center py-100">
                <div class="col-lg-12 text-center py-12 text-center">
                    <h5 class="head-title py-12" aria-label="School Chale Hum"></h5>
                </div><!--end col-->
            </div><!--end row-->
        </div><!-- end container -->
    </section>
    <!-- end hero -->

    <!-- start hero -->
    <section class="hero-one position-relative bg-black" id="home"  style="background-image: url('{% static "images/personal/main-bg.png" %}'); background-size: cover; background-position: center center;">
        <div class="row align-items-center justify-content-center" style="padding: 5px; align-items: center; text-align: center">
            <h4 style="color: white">Django Custom Reset View Implementation</h4>
        </div>
        <div class="row align-items-center justify-content-center" style="padding: 5px">
            <div class="col-lg-8  mx-auto">
              <div class="col-md-8 mx-auto">
                <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
                  <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1" style="background-color: black"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2" style="background-color: black"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3" style="background-color: black"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3" aria-label="Slide 4" style="background-color: black"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="4" aria-label="Slide 5" style="background-color: black"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="5" aria-label="Slide 6" style="background-color: black"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="6" aria-label="Slide 7" style="background-color: black"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="7" aria-label="Slide 8" style="background-color: black"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="8" aria-label="Slide 9" style="background-color: black"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="9" aria-label="Slide 10" style="background-color: black"></button>
                  </div>
                  <div class="carousel-inner border-radius-sm">
                    <div class="carousel-item active">
                      <img class="d-block w-100" src="{% static 'images/sliders/project13/project13_1.png' %}" alt="First slide" />
                        <div class="carousel-caption d-none d-md-block" style="color: black">
                          <h5>Home Page</h5>
                          <p></p>
                        </div>
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="{% static 'images/sliders/project13/project13_2.png' %}" alt="Second slide" />
                        <div class="carousel-caption d-none d-md-block" style="color: black">
                          <h5>Login Page</h5>
                          <p></p>
                        </div>
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="{% static 'images/sliders/project13/project13_3.png' %}" alt="Third slide" />
                        <div class="carousel-caption d-none d-md-block" style="color: black">
                          <h5>Register Page</h5>
                          <p></p>
                        </div>
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="{% static 'images/sliders/project13/project13_4.png' %}" alt="Fourth slide" />
                        <div class="carousel-caption d-none d-md-block" style="color: black">
                          <h5>Change Password Page</h5>
                          <p></p>
                        </div>
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="{% static 'images/sliders/project13/project13_5.png' %}" alt="Fifth slide" />
                        <div class="carousel-caption d-none d-md-block" style="color: black">
                          <h5>Reset Password Page</h5>
                          <p></p>
                        </div>
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="{% static 'images/sliders/project13/project13_6.png' %}" alt="Sixth slide" />
                        <div class="carousel-caption d-none d-md-block" style="color: black">
                          <h5>My Account Page</h5>
                          <p></p>
                        </div>
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="{% static 'images/sliders/project2/project2_7.png' %}" alt="Seventh slide" />
                        <div class="carousel-caption d-none d-md-block" style="color: black">
                          <h5>Student Detailed Page</h5>
                        </div>
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="{% static 'images/sliders/project13/project13_8.png' %}" alt="Eighth slide" />
                        <div class="carousel-caption d-none d-md-block" style="color: black">
                          <h5>Add New Student</h5>
                        </div>
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="{% static 'images/sliders/project13/project13_9.png' %}" alt="Ninth slide" />
                        <div class="carousel-caption d-none d-md-block" style="color: black">
                          <h5>Add New School</h5>
                        </div>
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="{% static 'images/sliders/project13/project13_10.png' %}" alt="Tenth slide" />
                        <div class="carousel-caption d-none d-md-block" style="color: black">
                          <h5>Add New Book</h5>
                        </div>
                    </div>
                  </div>
                  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon bg-success" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                  </button>
                  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                    <span class="carousel-control-next-icon bg-success" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                  </button>
                </div>
              </div>
            </div><!--end col-->

            <div class="col-lg-4 text-center px-0 px-xl-4 mt-5 mt-lg-0 pt-5 pt-lg-0">
                <h5 class="d-inline-block py-1 px-3 rounded text-muted font-secondary" style="color: white">Technologies Used</h5>
                <span class="wrap"></span>
                <div class="mb-4 mb-lg-0">
                    <div class="d-inline-block">
                        <span class="badge badge-lg rounded bg-soft-alt-info fw-normal fs-12 text-uppercase">Python</span>
                        <span class="badge badge-lg rounded bg-soft-alt-info fw-normal fs-12 text-uppercase">Django</span>
                        <span class="badge badge-lg rounded bg-soft-alt-info fw-normal fs-12 text-uppercase">HTML</span>
                        <span class="badge badge-lg rounded bg-soft-alt-info fw-normal fs-12 text-uppercase">CSS</span>
                        <span class="badge badge-lg rounded bg-soft-alt-info fw-normal fs-12 text-uppercase">Bootstrap</span>
                        <span class="badge badge-lg rounded bg-soft-alt-info fw-normal fs-12 text-uppercase">Javascript</span>
                        <span class="badge badge-lg rounded bg-soft-alt-info fw-normal fs-12 text-uppercase">Postgres</span>
                        <span class="badge badge-lg rounded bg-soft-alt-info fw-normal fs-12 text-uppercase">Heroku</span>
                        <span class="badge badge-lg rounded bg-soft-alt-info fw-normal fs-12 text-uppercase">Github</span>
                    </div>
                </div>

                <div class="mb-5 mb-lg-0" style="margin-top: 15px">
                    <a class="btn btn-block btn-social btn-github" href="https://github.com/arpansahu/school_chale_hum" target="_blank" style="color: white">
                        <span class="fa fa-github" style="margin-right: 10px; color: white"></span> Check Repo
                    </a>
                    <a class="btn btn-block btn-social btn-github" href="https://school-chale-hum.herokuapp.com/" target="_blank" style="color: white">
                        <span class="fa fa-youtube" style="margin-right: 10px; color: white"></span> Live Demo
                    </a>
                </div>
            </div><!--end col-->
</div><!--end row-->
    </section>
     <!-- end hero -->
     <div class="container-fluid py-4" style="background-color: black">
        <div class="row" style="border-radius: 10px">
          <div class="col-12" style="border-radius: 10px">
            <div class="card mb-12" style="border-radius: 20px">
                <div style="padding: 20px; border-radius: 10px">
                        <h2>Description</h2><hr>
                        <p>This project is implementation for the following topics related to technologies used with Django</p><br>
                            <p>-Implemented Complete Auth Using Custom Auth Model.</p>
                                <ol>
                                    <li>Django app for managing students, their respective schools and books</li>
                                    <li>Every student's progress with a particular book can be seen on the app</li>
                                    <li>Built Django Command for extracting data from csv and storing it into database</li>
                                    <li>Used Heroku Postgres</li>
                                    <li>Used REDIS-CLOUD Sever, provided by heroku add-ons</li>
                                    <li>Used AWS S3 bucket for static files</li>
                                    <li>Build custom templates for a lot of functionalities, you juts have to place template with same name inside same location which would be used by all auth</li>
                                    <li>
                                        In built views of PasswordChangeDoneView, PasswordChangeView, PasswordResetCompleteView,
                                        PasswordResetConfirmView, PasswordResetCompleteView.
                                        Build Custom Templates for These Inbuilt Views
                                    </li>
                                    <li>Used Mail JET API in place of SMTP and used custom reset View to override default send_mail method</li>
                                    <li>Deployed on Heroku</li>
                                </ol>
                            <p>-Deployed on Heroku</p>
                                <ol>
                                    <li>Used Heroku Postgres </li>
                                </ol>
                            <h2>Demo</h2><hr>
                            <p><a href="https://github.com/arpansahu/django-custom-user-model" target="_blank">Available at: https://github.com/arpansahu/django-custom-user-model</a></p>
                            <p>admin login details:--
                                email: admin@arpansahu.me
                                password: showmecode
                            </p>
                                <br>
                            <h2>License</h2><hr>
                            <p><a href="https://choosealicense.com/licenses/mit/">MIT</a></p>
                            <br>
                            <h2>Installation</h2><hr>
                            <p>Installing Pre requisites</p>

<pre><code class="language-python">pip install -r requirements.txt
</code></pre>
                            <p>Create .env and don't forget to add .env to gitignore</p>
<pre><code class="language-python">add variables mentioned in .env.example
</code>
</pre>
                            <p>Making Migrations and Migrating them.</p>
<pre><code class="language-python">python manage.py makemigrations
python manage.py migrate
</code></pre>
                            <p>Run update_data Command.</p>
<pre><code class="language-python">python manage.py update_data
</code></pre>
                            <p>Creating Super User.</p>
<pre><code class="language-python">python manage.py createsuperuser
</code></pre>
                            <p>Installing Redis On Local (For ubuntu) for other Os Please refer to their website https://redis.io/</p>
<pre><code class="language-python">bash
  curl -fsSL https://packages.redis.io/gpg | sudo gpg --dearmor -o /usr/share/keyrings/redis-archive-keyring.gpg
  echo "deb [signed-by=/usr/share/keyrings/redis-archive-keyring.gpg] https://packages.redis.io/deb $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/redis.list
  sudo apt-get update
  sudo apt-get install redis
  sudo systemctl restart redis.service
</code></pre>
                            <p>To check if its running or not</p>
<pre><code class="language-python">sudo systemctl status redis
</code></pre>
                            <p>Use these CACHE settings</p>
<pre><code class="language-python">
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.redis.RedisCache',
        # 'LOCATION': REDISCLOUD_URL,
        'LOCATION':'redis://localhost:6379'
    }
}
</code></pre>
                            <p>Run Server.</p>
<pre><code class="language-python">python manage.py runserver
</code></pre>
                            <h2>Deployment on Heroku</h2><hr>
                            <p>Installing Heroku Cli</p>
<pre><code class="language-python">checkout: https://devcenter.heroku.com/articles/heroku-cli
</code></pre>

                            <p>Create your account in Heroku.</p>
                            <p>Inside your project directory </p>
                            <p>Login Heroku CLI</p>
<pre><code class="language-python">heroku login
</code></pre>
                            <p>Create Heroku App</p>
<pre><code class="language-python">heroku create [app_name]
</code></pre>
                            <p>Push Heroku App</p>
<pre><code class="language-python">git push heroku master
</code></pre>
                            <p>Configure Heroku App Env Variables</p>
<pre><code class="language-python">heroku config:set GITHUB_USERNAME=joesmith
</code></pre>
                            <h2>Configuring Django App for Heroku</h2><hr>
                            <p>Install whitenoise </p>
<pre><code class="language-python">pip install whitenoise
</code></pre>
                            <p>Include it in Middlewares.</p>
<pre><code class="language-python">MIDDLEWARE = [
    # ...
    "django.middleware.security.SecurityMiddleware",
    "whitenoise.middleware.WhiteNoiseMiddleware",
    # ...
]
</code></pre>
                            <p>Create Procfile and include this code snippet in it.</p>
<pre><code class="language-python">release: ./release-tasks.sh
web: gunicorn djangoProject.wsgi
</code></pre>

                            <p>Create release-task.sh for running multilple commands in run: section of procfile.</p>
<pre><code class="language-python">python manage.py makemigrations
python manage.py migrate
python manage.py update_data                 (optional is you update this csv frequently)
</code></pre>
                            <p>Don't forget to make release-tasks.sh file executable using following command</p>
<pre><code class="language-python">chmod +x release-tasks.sh
</code></pre>
                            <p>Comment down Database setting and install </p>
<pre><code class="language-python">
# DATABASES = {
#     'default': {
#         'ENGINE': 'django.db.backends.postgresql',
#         'NAME': config('DB_NAME'),
#         'USER': config('DB_USER'),
#         'PASSWORD': config('DB_PASSWORD'),
#         'HOST': config('DB_HOST'),
#         'PORT': config('DB_PORT'),
#     }
# }
</code></pre>

<pre><code class="language-python">pip install dj-database-url
</code></pre>
                            <p>and add these lines below the commented Database settings</p>
<pre><code class="language-python">
import dj_database_url
DATABASES = {'default': dj_database_url.config(default=config('DATABASE_URL'))}
</code></pre>

                            <p>Change CACHE from </p>
<pre><code class="language-python">
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.redis.RedisCache',
        # 'LOCATION': REDIS_URL,
        'LOCATION':'redis://localhost:6379'
    }
}
</code></pre>
                            <p>to </p>
<pre><code class="language-python">
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.redis.RedisCache',
        'LOCATION': REDIS_URL,
        #'LOCATION':'redis://localhost:6379'
    }
}
</code></pre>

                            <h2>Environment Variables</h2><hr>
                            <p>To run this project, you will need to add the following environment variables to your .env file</p>
<pre><code class="language-python">REDIS_URL=
SECRET_KEY=
DEBUG=
ALLOWED_HOSTS=
DOMAIN=
PROTOCOL=
DATABASE_URL=
MAIL_JET_API_KEY=
MAIL_JET_API_SECRET=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_STORAGE_BUCKET_NAME=
DB_NAME=
DB_USER=
DB_PASSWORD=
DB_HOST=
DB_PORT=
</code></pre>
                    </div>
            </div>
          </div>
        </div>
     </div>
{% endblock content %}

<!-- Specific JS goes HERE -->
{% block javascripts %}
    <script>
    <!-- Copy Button JS -->
    const copyButtonLabel = "Copy Code";

    // you can use a class selector instead if you, or the syntax highlighting library adds one to the 'pre'.
    let blocks = document.querySelectorAll("pre");

    blocks.forEach((block) => {
      // only add button if browser supports Clipboard API
      if (navigator.clipboard) {
        let button = document.createElement("copy-button");
        button.innerText = copyButtonLabel;
        button.addEventListener("click", copyCode);
        block.appendChild(button);
      }
    });

    async function copyCode(event) {
      const button = event.srcElement;
      const pre = button.parentElement;
      let code = pre.querySelector("code");
      let text = code.innerText;
      await navigator.clipboard.writeText(text);

      button.innerText = "Code Copied";

      setTimeout(()=> {
        button.innerText = copyButtonLabel;
      },1000)
    }
    <!-- Copy Button JS ends-->
    </script>
{% endblock javascripts %}